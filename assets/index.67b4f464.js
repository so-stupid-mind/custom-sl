var mn=Object.defineProperty;var bn=(t,e,n)=>e in t?mn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var se=(t,e,n)=>(bn(t,typeof e!="symbol"?e+"":e,n),n);var Er=gn((Ce,Ct)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ee(){}function tn(t){return t()}function Rt(){return Object.create(null)}function Re(t){t.forEach(tn)}function wn(t){return typeof t=="function"}function ke(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function xn(t){return Object.keys(t).length===0}function nn(t,...e){if(t==null)return ee;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function mt(t){let e;return nn(t,n=>e=n)(),e}function M(t,e,n){t.$$.on_destroy.push(nn(e,n))}function c(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function U(t){t.parentNode.removeChild(t)}function _n(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function bt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t){return document.createTextNode(t)}function C(){return J(" ")}function rn(){return J("")}function W(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function o(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Oe(t){return t===""?null:+t}function vn(t){return Array.from(t.childNodes)}function ye(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function he(t,e){t.value=e==null?"":e}function Ve(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let kt;function Je(t){kt=t}const Ke=[],Ht=[],at=[],Mt=[],yn=Promise.resolve();let xt=!1;function Cn(){xt||(xt=!0,yn.then(sn))}function _t(t){at.push(t)}const gt=new Set;let rt=0;function sn(){const t=kt;do{for(;rt<Ke.length;){const e=Ke[rt];rt++,Je(e),kn(e.$$)}for(Je(null),Ke.length=0,rt=0;Ht.length;)Ht.pop()();for(let e=0;e<at.length;e+=1){const n=at[e];gt.has(n)||(gt.add(n),n())}at.length=0}while(Ke.length);for(;Mt.length;)Mt.pop()();xt=!1,gt.clear(),Je(t)}function kn(t){if(t.fragment!==null){t.update(),Re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_t)}}const lt=new Set;let Fn;function ae(t,e){t&&t.i&&(lt.delete(t),t.i(e))}function pe(t,e,n,r){if(t&&t.o){if(lt.has(t))return;lt.add(t),Fn.c.push(()=>{lt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Ln(t,e){t.d(1),e.delete(t.key)}function En(t,e,n,r,i,s,a,l,u,f,b,m){let g=t.length,p=s.length,_=g;const w={};for(;_--;)w[t[_].key]=_;const y=[],x=new Map,k=new Map;for(_=p;_--;){const L=m(i,s,_),D=n(L);let A=a.get(D);A?r&&A.p(L,e):(A=f(D,L),A.c()),x.set(D,y[_]=A),D in w&&k.set(D,Math.abs(_-w[D]))}const h=new Set,E=new Set;function S(L){ae(L,1),L.m(l,b),a.set(L.key,L),b=L.first,p--}for(;g&&p;){const L=y[p-1],D=t[g-1],A=L.key,H=D.key;L===D?(b=L.first,g--,p--):x.has(H)?!a.has(A)||h.has(A)?S(L):E.has(H)?g--:k.get(A)>k.get(H)?(E.add(A),S(L)):(h.add(H),g--):(u(D,a),g--)}for(;g--;){const L=t[g];x.has(L.key)||u(L,a)}for(;p;)S(y[p-1]);return y}function me(t){t&&t.c()}function fe(t,e,n,r){const{fragment:i,on_mount:s,on_destroy:a,after_update:l}=t.$$;i&&i.m(e,n),r||_t(()=>{const u=s.map(tn).filter(wn);a?a.push(...u):Re(u),t.$$.on_mount=[]}),l.forEach(_t)}function ue(t,e){const n=t.$$;n.fragment!==null&&(Re(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Sn(t,e){t.$$.dirty[0]===-1&&(Ke.push(t),Cn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ee(t,e,n,r,i,s,a,l=[-1]){const u=kt;Je(t);const f=t.$$={fragment:null,ctx:null,props:s,update:ee,not_equal:i,bound:Rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Rt(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};a&&a(f.root);let b=!1;if(f.ctx=n?n(t,e.props||{},(m,g,...p)=>{const _=p.length?p[0]:g;return f.ctx&&i(f.ctx[m],f.ctx[m]=_)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](_),b&&Sn(t,m)),g}):[],f.update(),b=!0,Re(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){const m=vn(e.target);f.fragment&&f.fragment.l(m),m.forEach(U)}else f.fragment&&f.fragment.c();e.intro&&ae(t.$$.fragment),fe(t,e.target,e.anchor,e.customElement),sn()}Je(u)}class Se{$destroy(){ue(this,1),this.$destroy=ee}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!xn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Me=[];function Fe(t,e=ee){let n;const r=new Set;function i(l){if(ke(t,l)&&(t=l,n)){const u=!Me.length;for(const f of r)f[1](),Me.push(f,t);if(u){for(let f=0;f<Me.length;f+=2)Me[f][0](Me[f+1]);Me.length=0}}}function s(l){i(l(t))}function a(l,u=ee){const f=[l,u];return r.add(f),r.size===1&&(n=e(i)||ee),l(t),()=>{r.delete(f),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}const je=Fe("home"),V={Home:"home",SettingsLight:"settings_light",SettingsHorn:"settings_horn",Bluetooth:"bluetooth"},it=t=>{je.set(t),console.log("wrPage_Active.set(page)",t)},Ne=(t,e,n)=>({min:t,max:e,default:n,step:1e-6,value:n,wrValue:Fe(n),normalize:r=>(r=Math.min(e,Math.max(t,r)),Number.isFinite(r)?r:n)}),Bn=t=>{const e=r=>r?1:0,n=e(t);return{min:0,max:1,default:n,step:1,value:n,wrValue:Fe(n),normalize:e}},De=(t,e,n)=>({parameterKey:t,parameterName:e,parameterUIOptions:n}),wt=(t,e)=>({otherId:t,parameters:e});class Ft{constructor(e){this._list=e}static create(e){return new Ft(e)}setParameterValue(e,n,r){var s,a,l;const i=(l=(a=(s=this._list)==null?void 0:s.find(u=>u.otherId===e))==null?void 0:a.parameters)==null?void 0:l.find(u=>u.parameterKey===n);return i?(r=i.parameterUIOptions.normalize(r),i.parameterUIOptions.value=r,i.parameterUIOptions.wrValue.set(r),!0):!1}isUIInvalidateState(){for(const e of this._list)for(const n of e.parameters)if(mt(n.parameterUIOptions.wrValue)!==n.parameterUIOptions.value)return!0;return!1}clearUIInvalidateState(){for(const e of this._list)for(const n of e.parameters)n.parameterUIOptions.value=mt(n.parameterUIOptions.wrValue)}getKeyValueList(){return this._list.map(e=>({otherId:e.otherId,parameters:e.parameters.map(n=>({parameterKey:n.parameterKey,parameterValue:n.parameterUIOptions.normalize(mt(n.parameterUIOptions.wrValue))}))}))}getHumanObjParameters(e){var r;const n=(r=this._list)==null?void 0:r.find(i=>i.otherId===e);return n?Object.fromEntries(n.parameters.map(i=>[i.parameterName,{...i,...i.parameterUIOptions}])):null}}const an=1,ln=2,on=3,$e=Ft.create([wt(an,[De(0,"fps",Ne(.5,40,20)),De(1,"fillingRate",Ne(0,1,.5)),De(2,"fillingEmptyRate2",Ne(0,1,.5)),De(3,"fillingRate2",Ne(0,1,.5))]),wt(ln,[De(0,"fps",Ne(.5,40,20)),De(1,"fillingRate",Ne(0,1,.5))]),wt(on,[De(0,"enable",Bn(!1))])]);window.controlParameters=$e;const ct=Fe(!1);var Ue="input is invalid type",Lt=typeof window=="object",Le=Lt?window:{};Le.JS_SHA256_NO_WINDOW&&(Lt=!1);var In=!Lt&&typeof self=="object",cn=!Le.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";cn?Le=global:In&&(Le=self);!Le.JS_SHA256_NO_COMMON_JS&&typeof Ct=="object"&&Ct.exports;typeof define=="function"&&define.amd;var Xe=!Le.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",v="0123456789abcdef".split(""),$n=[-2147483648,8388608,32768,128],we=[24,16,8,0],st=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ot=["hex","array","digest","arrayBuffer"],K=[];(Le.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"});Xe&&(Le.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var Nt=function(t,e){return function(n){return new Z(e,!0).update(n)[t]()}},Et=function(t){var e=Nt("hex",t);cn&&(e=An(e,t)),e.create=function(){return new Z(t)},e.update=function(i){return e.create().update(i)};for(var n=0;n<ot.length;++n){var r=ot[n];e[r]=Nt(r,t)}return e},An=function(t,e){var n=require("crypto"),r=require("buffer").Buffer,i=e?"sha224":"sha256",s;r.from&&!Le.JS_SHA256_NO_BUFFER_FROM?s=r.from:s=function(l){return new r(l)};var a=function(l){if(typeof l=="string")return n.createHash(i).update(l,"utf8").digest("hex");if(l==null)throw new Error(Ue);return l.constructor===ArrayBuffer&&(l=new Uint8Array(l)),Array.isArray(l)||ArrayBuffer.isView(l)||l.constructor===r?n.createHash(i).update(s(l)).digest("hex"):t(l)};return a},Ot=function(t,e){return function(n,r){return new ut(n,e,!0).update(r)[t]()}},ft=function(t){var e=Ot("hex",t);e.create=function(i){return new ut(i,t)},e.update=function(i,s){return e.create(i).update(s)};for(var n=0;n<ot.length;++n){var r=ot[n];e[r]=Ot(r,t)}return e};function Z(t,e){e?(K[0]=K[16]=K[1]=K[2]=K[3]=K[4]=K[5]=K[6]=K[7]=K[8]=K[9]=K[10]=K[11]=K[12]=K[13]=K[14]=K[15]=0,this.blocks=K):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Z.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null)throw new Error(Ue);if(Xe&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!Xe||!ArrayBuffer.isView(t)))throw new Error(Ue)}else throw new Error(Ue);e=!0}for(var r,i=0,s,a=t.length,l=this.blocks;i<a;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)for(s=this.start;i<a&&s<64;++i)l[s>>>2]|=t[i]<<we[s++&3];else for(s=this.start;i<a&&s<64;++i)r=t.charCodeAt(i),r<128?l[s>>>2]|=r<<we[s++&3]:r<2048?(l[s>>>2]|=(192|r>>>6)<<we[s++&3],l[s>>>2]|=(128|r&63)<<we[s++&3]):r<55296||r>=57344?(l[s>>>2]|=(224|r>>>12)<<we[s++&3],l[s>>>2]|=(128|r>>>6&63)<<we[s++&3],l[s>>>2]|=(128|r&63)<<we[s++&3]):(r=65536+((r&1023)<<10|t.charCodeAt(++i)&1023),l[s>>>2]|=(240|r>>>18)<<we[s++&3],l[s>>>2]|=(128|r>>>12&63)<<we[s++&3],l[s>>>2]|=(128|r>>>6&63)<<we[s++&3],l[s>>>2]|=(128|r&63)<<we[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=l[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Z.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=$n[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Z.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,s=this.h5,a=this.h6,l=this.h7,u=this.blocks,f,b,m,g,p,_,w,y,x,k,h;for(f=16;f<64;++f)p=u[f-15],b=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,p=u[f-2],m=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,u[f]=u[f-16]+b+u[f-7]+m<<0;for(h=e&n,f=0;f<64;f+=4)this.first?(this.is224?(y=300032,p=u[0]-1413257819,l=p-150054599<<0,r=p+24177077<<0):(y=704751109,p=u[0]-210244248,l=p-1521486534<<0,r=p+143694565<<0),this.first=!1):(b=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),m=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),y=t&e,g=y^t&n^h,w=i&s^~i&a,p=l+m+w+st[f]+u[f],_=b+g,l=r+p<<0,r=p+_<<0),b=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),m=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),x=r&t,g=x^r&e^y,w=l&i^~l&s,p=a+m+w+st[f+1]+u[f+1],_=b+g,a=n+p<<0,n=p+_<<0,b=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),m=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),k=n&r,g=k^n&t^x,w=a&l^~a&i,p=s+m+w+st[f+2]+u[f+2],_=b+g,s=e+p<<0,e=p+_<<0,b=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),m=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),h=e&n,g=h^e&r^k,w=s&a^~s&l,p=i+m+w+st[f+3]+u[f+3],_=b+g,i=t+p<<0,t=p+_<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0,this.h5=this.h5+s<<0,this.h6=this.h6+a<<0,this.h7=this.h7+l<<0};Z.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,s=this.h5,a=this.h6,l=this.h7,u=v[t>>>28&15]+v[t>>>24&15]+v[t>>>20&15]+v[t>>>16&15]+v[t>>>12&15]+v[t>>>8&15]+v[t>>>4&15]+v[t&15]+v[e>>>28&15]+v[e>>>24&15]+v[e>>>20&15]+v[e>>>16&15]+v[e>>>12&15]+v[e>>>8&15]+v[e>>>4&15]+v[e&15]+v[n>>>28&15]+v[n>>>24&15]+v[n>>>20&15]+v[n>>>16&15]+v[n>>>12&15]+v[n>>>8&15]+v[n>>>4&15]+v[n&15]+v[r>>>28&15]+v[r>>>24&15]+v[r>>>20&15]+v[r>>>16&15]+v[r>>>12&15]+v[r>>>8&15]+v[r>>>4&15]+v[r&15]+v[i>>>28&15]+v[i>>>24&15]+v[i>>>20&15]+v[i>>>16&15]+v[i>>>12&15]+v[i>>>8&15]+v[i>>>4&15]+v[i&15]+v[s>>>28&15]+v[s>>>24&15]+v[s>>>20&15]+v[s>>>16&15]+v[s>>>12&15]+v[s>>>8&15]+v[s>>>4&15]+v[s&15]+v[a>>>28&15]+v[a>>>24&15]+v[a>>>20&15]+v[a>>>16&15]+v[a>>>12&15]+v[a>>>8&15]+v[a>>>4&15]+v[a&15];return this.is224||(u+=v[l>>>28&15]+v[l>>>24&15]+v[l>>>20&15]+v[l>>>16&15]+v[l>>>12&15]+v[l>>>8&15]+v[l>>>4&15]+v[l&15]),u};Z.prototype.toString=Z.prototype.hex;Z.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,s=this.h5,a=this.h6,l=this.h7,u=[t>>>24&255,t>>>16&255,t>>>8&255,t&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255];return this.is224||u.push(l>>>24&255,l>>>16&255,l>>>8&255,l&255),u};Z.prototype.array=Z.prototype.digest;Z.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};function ut(t,e,n){var r,i=typeof t;if(i==="string"){var s=[],a=t.length,l=0,u;for(r=0;r<a;++r)u=t.charCodeAt(r),u<128?s[l++]=u:u<2048?(s[l++]=192|u>>>6,s[l++]=128|u&63):u<55296||u>=57344?(s[l++]=224|u>>>12,s[l++]=128|u>>>6&63,s[l++]=128|u&63):(u=65536+((u&1023)<<10|t.charCodeAt(++r)&1023),s[l++]=240|u>>>18,s[l++]=128|u>>>12&63,s[l++]=128|u>>>6&63,s[l++]=128|u&63);t=s}else if(i==="object"){if(t===null)throw new Error(Ue);if(Xe&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!Xe||!ArrayBuffer.isView(t)))throw new Error(Ue)}else throw new Error(Ue);t.length>64&&(t=new Z(e,!0).update(t).array());var f=[],b=[];for(r=0;r<64;++r){var m=t[r]||0;f[r]=92^m,b[r]=54^m}Z.call(this,e,n),this.update(b),this.oKeyPad=f,this.inner=!0,this.sharedMemory=n}ut.prototype=new Z;ut.prototype.finalize=function(){if(Z.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Z.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Z.prototype.finalize.call(this)}};var Ce=Et();Ce.sha256=Ce;Ce.sha224=Et(!0);Ce.sha256.hmac=ft();Ce.sha224.hmac=ft(!0);Ce.sha256.hmac=ft();Ce.sha224.hmac=ft(!0);const Tn=Ce;Et(!0);const Ze=t=>new Promise(e=>setTimeout(e,t)),dt=t=>t.buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t),Pn=t=>parseInt(Tn(t).slice(0,4).match(/../g).reverse().join(""),16)|0,fn=t=>{const e=dt(t);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(0,Pn(e.subarray(2)),!0),e};class St{constructor(e){this._buffer=new ArrayBuffer(e),this._dv=new DataView(this._buffer),this._offset=0,this._chunks=[]}_o(e){const n=this._offset;return this._offset+=e,n}u8(e){return this._dv.setUint8(this._o(1),e),this}u16(e){return this._dv.setUint16(this._o(2),e,!0),this}f64(e){return this._dv.setFloat64(this._o(8),e,!0),this}staticString(e,n){var i;const r=new TextEncoder("utf-8").encode(e);for(let s=0;s<n;s++)this.u8((i=r[s])!=null?i:0);return this}buffer(e){const n=dt(e);for(const r of n)this.u8(r);return this}getData(){return new Uint8Array(this._buffer,0,this._offset)}}class un{constructor(e){this._u8arr=dt(e),this._dv=new DataView(this._u8arr.buffer,this._u8arr.byteOffset,this._u8arr.byteLength),this._offset=0}_o(e){const n=this._offset;return this._offset+=e,n}u8(e){return this._dv.getUint8(this._o(1))}u16(e){return this._dv.getUint16(this._o(2),!0)}f64(e){return this._dv.getFloat64(this._o(8),!0)}getData(){return this._u8arr.subarray(this._offset)}}const Vt=100,Dn=70;let Un=1;class Rn{constructor(){this._list=[]}_log(e){var n,r;e.id=Un++,e.text=e.args.join(" "),this._list.push(e),this._list.length>Vt&&this._list.splice(0,Vt-Dn),(n=this._cb)==null||n.call(this,e),(r=this._cbList)==null||r.call(this,this._list)}notify(...e){this._log({args:e,type:"notify"})}done(...e){this._log({args:e,type:"done"})}warning(...e){this._log({args:e,type:"warning"})}error(...e){this._log({args:e,type:"error"})}clear(){var e;this._list.splice(0,1e9),(e=this._cbList)==null||e.call(this,this._list)}onLog(e){this._cb=e}onLogList(e){this._cbList=e}}const Hn=new Rn,te=()=>Hn,Mn="CustomSL",Nn="2357d72d-459d-44c4-8a0a-60bfa8fbdf82",On="3395c6d2-d588-4ce8-87cb-5b1addfd76e4",Vn="9e44d093-0708-4c17-8475-1759ed91d1e5";class jn{constructor(e){se(this,"bleDevice");se(this,"bleGATTServer");se(this,"bleService");se(this,"bleCharacteristicsMap");this.bleDevice=e.bleDevice,this.bleGATTServer=e.bleGATTServer,this.bleService=e.bleService,this.bleCharacteristicsMap=e.bleCharacteristicsMap,this._logger=e.logger}isConnected(){var e;return(e=this.bleGATTServer)==null?void 0:e.connected}findBLECharacteristic(e){var n;return(n=this.bleCharacteristicsMap.get(e))==null?void 0:n.bleCharacteristic}static async create(e,n,r,i){i==null||i.notify("[BLE] Connecting to GATTServer...");const s=await n.gatt.connect();i==null||i.done("[BLE] Connected to GATTServer"),i==null||i.notify(`[BLE] Connecting to service {${e.serivceUUID}}...`);const a=await s.getPrimaryService(e.serivceUUID);i==null||i.done(`[BLE] Connected to service {${e.serivceUUID}}`),i==null||i.notify("[BLE] Connection to characteristics...");const l=new Map;for(const u of e.chars){const f=await a.getCharacteristic(u.charUUID),b={...u,charName:u.charName,charUUID:u.charUUID,bleCharacteristic:f};l.set(u.charName,b);const m=(f.properties.read?"R":"")+(f.properties.write?"W":"")+(f.properties.notify?"N":"")+(f.properties.indicate?"I":"")+(f.properties.broadcast?"B":"");i==null||i.done(`[BLE] Connected to char [${m}] {${f.uuid}}`)}i==null||i.notify("[BLE] Subscribe to characteristics...");for(const u of l.values()){if(!u.bleCharacteristic.properties.notify)continue;const f=await u.bleCharacteristic.startNotifications();f.oncharacteristicvaluechanged=r,i==null||i.done(`[BLE] Subscribed to char. {${f.uuid}}`)}return new this({bleDevice:n,bleGATTServer:s,bleService:a,bleCharacteristicsMap:l,logger:i})}}class Wn{constructor(e){se(this,"_workFlag",!0);se(this,"_options",null);se(this,"_bleDevice",null);se(this,"_bleWorkClass",null);se(this,"wrBLEDevice",Fe(null));se(this,"wrBLEGATTServer",Fe(null));se(this,"wrBLEService",Fe(null));se(this,"wrBLECharacteristics",Fe(null));se(this,"wrBLEConnected",Fe(!1));var n,r,i,s;this._options={...e,readChars:[...(n=e.readChars)!=null?n:[]].map(a=>({...a})),writeChars:[...(r=e.writeChars)!=null?r:[]].map(a=>({...a})),chars:[...((i=e.readChars)!=null?i:[]).map(a=>({...a,type:"read"})),...((s=e.writeChars)!=null?s:[]).map(a=>({...a,type:"write"}))]},this._loop()}_log(e){console.log(`[BLE] ${e}`)}_clearState(){this._bleWorkClass=null,this.wrBLEGATTServer.set(null),this.wrBLEService.set(null),this.wrBLECharacteristics.set(null),this.wrBLEConnected.set(!1)}async _bleProcess(){this._clearState();try{if(this._bleDevice)return this._bleWorkClass=await jn.create(this._options,this._bleDevice,this._oncharacteristicvaluechanged.bind(this),te()),this.wrBLEGATTServer.set(this._bleWorkClass.bleGATTServer),this.wrBLEService.set(this._bleWorkClass.bleService),this.wrBLECharacteristics.set([...this._bleWorkClass.bleCharacteristicsMap.values()]),this.wrBLEConnected.set(!0),!0}catch(e){console.log(e),te().error(`[BLE] ${e}`)}return!1}async _loop(){var e,n;for(;this._workFlag;)await Ze(100),(n=(e=this._bleWorkClass)==null?void 0:e.bleGATTServer)!=null&&n.connected||(await this._bleProcess(),await Ze(500))}async _requestDevice(){if(!this._bleDevice){if(te().notify("[BLE] Connecting to device..."),this._bleDevice=await navigator.bluetooth.requestDevice({filters:[{name:this._options.deviceName}],optionalServices:[this._options.serivceUUID],acceptAllDevices:!1}),!this._bleDevice)throw new Error("navigator.bluetooth.requestDevice failed");te().done(`[BLE] Connected to device "${this._bleDevice.name}"`),this.wrBLEDevice.set(this._bleDevice)}}_oncharacteristicvaluechanged(e){}isConnected(){var e;return(e=this==null?void 0:this._bleWorkClass)==null?void 0:e.isConnected()}async connect(){try{await this._requestDevice()}catch(e){console.log(e),te().error(`[BLE] ${e}`)}}async writeValue(e,n){try{if(!this.isConnected())return!1;const r=this._bleWorkClass.findBLECharacteristic(e);return r?(te().notify(`[BLE] Write value to char... {${r.uuid}}`),await r.writeValue(n),te().done(`[BLE] Writed value to char {${r.uuid}}`),!0):!1}catch(r){te().error(`[BLE] ${r.message}`)}return!1}async readValue(e){try{if(!this.isConnected())return null;const n=this._bleWorkClass.findBLECharacteristic(e);if(!n)return null;te().notify(`[BLE] Read char. value... {${n.uuid}}`);const r=await n.readValue();return te().done(`[BLE] Readed char value {${n.uuid}}`),r}catch(n){te().error(`[BLE] ${n.message}`)}return null}}const dn=new Wn({deviceName:Mn,serivceUUID:Nn,writeChars:[{charUUID:On,charName:"request"}],readChars:[{charUUID:Vn,charName:"inform"}]});window.bleInstance=dn;const vt=()=>dn;function jt(t){let e,n,r,i,s,a=!t[1]&&Wt();return{c(){e=d("div"),n=bt("svg"),r=bt("path"),i=bt("polyline"),s=C(),a&&a.c(),o(r,"stroke","none"),o(r,"d","M0 0h24v24H0z"),o(i,"points","6 8 18 16 12 20 12 4 18 8 6 16"),o(n,"class","h-8 w-8 text-blue-600"),o(n,"width","24"),o(n,"height","24"),o(n,"viewBox","0 0 24 24"),o(n,"stroke-width","2"),o(n,"stroke","currentColor"),o(n,"fill","none"),o(n,"stroke-linecap","round"),o(n,"stroke-linejoin","round"),o(e,"class","w-10 h-10 rounded-full flex items-center justify-center relative mr-4")},m(l,u){R(l,e,u),c(e,n),c(n,r),c(n,i),c(e,s),a&&a.m(e,null)},p(l,u){l[1]?a&&(a.d(1),a=null):a||(a=Wt(),a.c(),a.m(e,null))},d(l){l&&U(e),a&&a.d()}}}function Wt(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="flex items-center"><svg aria-hidden="true" class="w-10 h-10 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg></div>',o(e,"class","absolute h-full w-full flex items-center justify-center"),Ve(e,"left","0px"),Ve(e,"top","0px")},m(n,r){R(n,e,r)},d(n){n&&U(e)}}}function zn(t){let e,n,r,i,s,a,l,u,f=t[0]&&jt(t);return{c(){e=d("header"),n=d("div"),n.innerHTML='<h1 class="text-2xl font-bold"><i class="fa-solid fa-car text-blue-500 mr-2"></i>\u0421\u0442\u0440\u043E\u0431\u043E\u0441\u043A\u043E\u043F</h1>',r=C(),i=d("div"),f&&f.c(),s=C(),a=d("button"),a.innerHTML=`<i class="fas fa-moon text-gray-800 dark:hidden"></i> 
            <i class="fas fa-sun text-white hidden dark:block"></i>`,o(a,"class","w-10 h-10 rounded-full flex items-center justify-center dark:bg-blue-500 bg-gray-200 hover:bg-gray-300 dark:hover:bg-blue-600 transition"),o(i,"class","flex"),o(e,"class","py-4 px-6 flex justify-between items-center bg-white dark:bg-gray-800 shadow-sm")},m(b,m){R(b,e,m),c(e,n),c(e,r),c(e,i),f&&f.m(i,null),c(i,s),c(i,a),l||(u=W(a,"click",t[2]),l=!0)},p(b,[m]){b[0]?f?f.p(b,m):(f=jt(b),f.c(),f.m(i,s)):f&&(f.d(1),f=null)},i:ee,o:ee,d(b){b&&U(e),f&&f.d(),l=!1,u()}}}const zt="main:style:theme";function Gn(t,e,n){let r,i;const s=["light","dark"],a=w=>!!s.find(y=>y===w),l=w=>a(w)?w:s[0],u=()=>l(localStorage.getItem(zt)),f=()=>{const w=u();document.documentElement.classList.add(w),s.filter(y=>y!==w).map(y=>document.documentElement.classList.remove(y))},b=w=>(w=l(w),u()===w?!1:(localStorage.setItem(zt,w),f(),!0)),g=()=>{let w=u();const y=s.findIndex(x=>x===w);w=y===-1?s[0]:s[(y+1)%s.length],b(w)};f();const p=bleInstance.wrBLEDevice;M(t,p,w=>n(0,r=w));const _=bleInstance.wrBLEConnected;return M(t,_,w=>n(1,i=w)),[r,i,g,p,_]}class qn extends Se{constructor(e){super(),Ee(this,e,Gn,zn,ke,{})}}function Kn(t){let e,n,r,i,s,a,l,u,f,b,m,g,p,_,w,y,x,k,h,E,S,L,D,A,H,N,ne;return{c(){e=d("nav"),n=d("div"),r=d("button"),i=d("i"),s=C(),a=d("span"),a.textContent="\u0413\u043B\u0430\u0432\u043D\u0430\u044F",u=C(),f=d("button"),b=d("i"),m=C(),g=d("span"),g.textContent="\u0424\u0430\u0440\u044B",_=C(),w=d("button"),y=d("i"),x=C(),k=d("span"),k.textContent="\u0413\u0443\u0434\u043E\u043A",E=C(),S=d("button"),L=d("div"),L.innerHTML='<svg class="h-7 w-7 " width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><polyline points="6 8 18 16 12 20 12 4 18 8 6 16"></polyline></svg>',D=C(),A=d("span"),A.textContent="Bluetooth",o(i,"class","fas fa-home mb-1 text-xl"),o(a,"class","text-xs"),o(r,"class",l="nav-btn flex flex-col items-center "+(t[0]===V.Home?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400")),o(r,"data-page","home"),o(b,"class","fas fa-car mb-1 text-xl"),o(g,"class","text-xs"),o(f,"class",p="nav-btn flex flex-col items-center "+(t[0]===V.SettingsLight?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400")),o(f,"data-page","settings"),o(y,"class","fas fa-bullhorn mb-1 text-xl"),o(k,"class","text-xs"),o(w,"class",h="nav-btn flex flex-col items-center "+(t[0]===V.SettingsHorn?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400")),o(w,"data-page","horn-settings"),o(L,"class","flex mb-1"),o(A,"class","text-xs"),o(S,"class",H="nav-btn flex flex-col items-center "+(t[0]===V.Bluetooth?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400")),o(S,"data-page","horn-settings"),o(n,"class","flex justify-around"),o(e,"class","bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-3")},m(Y,$){R(Y,e,$),c(e,n),c(n,r),c(r,i),c(r,s),c(r,a),c(n,u),c(n,f),c(f,b),c(f,m),c(f,g),c(n,_),c(n,w),c(w,y),c(w,x),c(w,k),c(n,E),c(n,S),c(S,L),c(S,D),c(S,A),N||(ne=[W(r,"click",t[1]),W(f,"click",t[2]),W(w,"click",t[3]),W(S,"click",t[4])],N=!0)},p(Y,[$]){$&1&&l!==(l="nav-btn flex flex-col items-center "+(Y[0]===V.Home?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400"))&&o(r,"class",l),$&1&&p!==(p="nav-btn flex flex-col items-center "+(Y[0]===V.SettingsLight?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400"))&&o(f,"class",p),$&1&&h!==(h="nav-btn flex flex-col items-center "+(Y[0]===V.SettingsHorn?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400"))&&o(w,"class",h),$&1&&H!==(H="nav-btn flex flex-col items-center "+(Y[0]===V.Bluetooth?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400"))&&o(S,"class",H)},i:ee,o:ee,d(Y){Y&&U(e),N=!1,Re(ne)}}}function Jn(t,e,n){let r;return M(t,je,u=>n(0,r=u)),[r,()=>it(V.Home),()=>it(V.SettingsLight),()=>it(V.SettingsHorn),()=>it(V.Bluetooth)]}class Zn extends Se{constructor(e){super(),Ee(this,e,Jn,Kn,ke,{})}}function Gt(t){let e;return{c(){e=d("div"),e.innerHTML=`<div class="flex items-center"><svg aria-hidden="true" class="w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> 
			<span class="sr-only">Loading...</span></div>`,o(e,"class","absolute bg-white dark:bg-black dark:bg-opacity-60 bg-opacity-60 z-10 h-full w-full flex items-center justify-center"),Ve(e,"left","0px"),Ve(e,"top","0px")},m(n,r){R(n,e,r)},d(n){n&&U(e)}}}function Yn(t){let e,n=t[0]&&Gt();return{c(){n&&n.c(),e=rn()},m(r,i){n&&n.m(r,i),R(r,e,i)},p(r,[i]){r[0]?n||(n=Gt(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ee,o:ee,d(r){n&&n.d(r),r&&U(e)}}}function Xn(t,e,n){let{loading:r}=e;return t.$$set=i=>{"loading"in i&&n(0,r=i.loading)},[r]}class Ye extends Se{constructor(e){super(),Ee(this,e,Xn,Yn,ke,{loading:0})}}function Qn(t){let e,n,r,i,s,a,l,u,f,b,m,g,p,_,w,y,x;return _=new Ye({props:{loading:t[1]}}),{c(){e=d("label"),n=d("div"),r=d("div"),r.innerHTML='<i class="fa-solid fa-lightbulb text-2xl text-blue-500"></i>',i=C(),s=d("div"),s.innerHTML='<i class="fa-solid fa-bullhorn text-2xl text-green-500"></i>',a=C(),l=d("div"),l.innerHTML=`<h3 class="font-bold">\u0421\u0442\u0440\u043E\u0431\u043E\u0441\u043A\u043E\u043F\u044B</h3> 
				<p class="text-sm text-gray-500 dark:text-gray-400">\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C/\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C</p>`,u=C(),f=d("div"),b=d("input"),m=C(),g=d("div"),p=C(),me(_.$$.fragment),o(r,"class","w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center mr-3"),o(s,"class","w-12 h-12 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center mr-3"),o(l,"class","flex-1"),o(b,"type","checkbox"),o(b,"class","sr-only peer"),b.disabled=t[1],o(g,"class","w-12 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"),o(f,"class","relative inline-flex items-center cursor-pointer"),o(n,"class","flex items-center mb-4 relative overflow-hidden"),o(e,"class","block overflow-hidden relative bg-white dark:bg-gray-800 rounded-2xl p-5 floating-shadow ")},m(k,h){R(k,e,h),c(e,n),c(n,r),c(n,i),c(n,s),c(n,a),c(n,l),c(n,u),c(n,f),c(f,b),b.checked=t[0],c(f,m),c(f,g),c(e,p),fe(_,e,null),w=!0,y||(x=W(b,"change",t[3]),y=!0)},p(k,[h]){(!w||h&2)&&(b.disabled=k[1]),h&1&&(b.checked=k[0]);const E={};h&2&&(E.loading=k[1]),_.$set(E)},i(k){w||(ae(_.$$.fragment,k),w=!0)},o(k){pe(_.$$.fragment,k),w=!1},d(k){k&&U(e),ue(_),y=!1,x()}}}function er(t,e,n){let r,i;M(t,ct,u=>n(1,i=u));const a=$e.getHumanObjParameters(on).enable.wrValue;M(t,a,u=>n(0,r=u));function l(){r=this.checked,a.set(r)}return[r,i,a,l]}class tr extends Se{constructor(e){super(),Ee(this,e,er,Qn,ke,{})}}function nr(t){let e,n,r,i,s,a,l,u,f,b,m,g,p=t[1].toFixed(2)+"",_,w,y,x,k,h,E,S,L,D,A,H,N,ne,Y,$,xe,z=t[11](t[3])+"",G,re,be,T,B,O,_e,X,Ae,Te,Q,Be,ge,le,We,ve,ie,j=t[11](t[4])+"",Ie,ze,F,I,de,Ge,He,Qe,Bt,qe,et,tt=t[11](t[5])+"",ht,It,$t,oe,At,Pe,nt,ce,pt,Tt;return h=new Ye({props:{loading:t[2]}}),O=new Ye({props:{loading:t[2]}}),Pe=new Ye({props:{loading:t[2]}}),{c(){e=d("div"),n=d("div"),r=d("div"),i=d("h3"),i.innerHTML=`<i class="fa-solid fa-sliders mr-2 text-blue-500"></i>
                        \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B`,s=C(),a=d("div"),l=d("div"),u=d("div"),f=d("label"),f.textContent="\u0427\u0430\u0441\u0442\u043E\u0442\u0430 \u0432\u0441\u043F\u044B\u0448\u0435\u043A",b=C(),m=d("span"),g=d("span"),_=J(p),w=J(" \u0413\u0446"),y=C(),x=d("input"),k=C(),me(h.$$.fragment),E=C(),S=d("div"),L=d("h3"),L.innerHTML=`<i class="fa-solid fa-lightbulb mr-2 text-yellow-500"></i>
                        \u041B\u0435\u0432\u0430\u044F \u0444\u0430\u0440\u0430`,D=C(),A=d("div"),H=d("div"),N=d("div"),ne=d("label"),ne.textContent="\u0417\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0435",Y=C(),$=d("span"),xe=d("span"),G=J(z),re=J("%"),be=C(),T=d("input"),B=C(),me(O.$$.fragment),_e=C(),X=d("div"),Ae=d("h3"),Ae.innerHTML=`<i class="fa-solid fa-lightbulb mr-2 text-yellow-500"></i>
                        \u041F\u0440\u0430\u0432\u0430\u044F \u0444\u0430\u0440\u0430`,Te=C(),Q=d("div"),Be=d("div"),ge=d("div"),le=d("label"),le.textContent="\u041F\u0440\u043E\u043F\u0443\u0441\u043A",We=C(),ve=d("span"),ie=d("span"),Ie=J(j),ze=J("%"),F=C(),I=d("input"),de=C(),Ge=d("div"),He=d("div"),Qe=d("label"),Qe.textContent="\u0417\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0435",Bt=C(),qe=d("span"),et=d("span"),ht=J(tt),It=J("%"),$t=C(),oe=d("input"),At=C(),me(Pe.$$.fragment),o(i,"class","font-bold mb-4 flex items-center"),o(f,"class","font-medium"),o(g,"id","frequency-value"),o(m,"class","text-blue-500 font-bold"),o(u,"class","flex justify-between mb-1"),o(x,"type","range"),o(x,"min",t[6].fps.min),o(x,"max",t[6].fps.max),o(x,"step",t[6].fps.step),o(x,"class","w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),x.disabled=t[2],o(a,"class","space-y-4"),o(r,"class","bg-white dark:bg-gray-800 rounded-2xl p-5 mb-6 floating-shadow relative overflow-hidden"),o(L,"class","font-bold mb-4 flex items-center"),o(ne,"class","font-medium"),o(xe,"id","duty1-value"),o($,"class","text-yellow-500 font-bold"),o(N,"class","flex justify-between mb-1"),o(T,"type","range"),o(T,"min",t[6].fillingRate.min),o(T,"max",t[6].fillingRate.max),o(T,"step",t[6].fillingRate.step),o(T,"class","w-full h-2 bg-yellow-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),T.disabled=t[2],o(A,"class","space-y-4"),o(S,"class","bg-white dark:bg-gray-800 rounded-2xl p-5 mb-6 floating-shadow relative overflow-hidden"),o(Ae,"class","font-bold mb-4 flex items-center"),o(le,"class","font-medium"),o(ie,"id","skip-value"),o(ve,"class","text-purple-500 font-bold"),o(ge,"class","flex justify-between mb-1"),o(I,"type","range"),o(I,"min",t[6].fillingEmptyRate2.min),o(I,"max",t[6].fillingEmptyRate2.max),o(I,"step",t[6].fillingEmptyRate2.step),o(I,"class","w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),I.disabled=t[2],o(Qe,"class","font-medium"),o(et,"id","duty2-value"),o(qe,"class","text-green-500 font-bold"),o(He,"class","flex justify-between mb-1"),o(oe,"type","range"),o(oe,"min",t[6].fillingRate2.min),o(oe,"max",t[6].fillingRate2.max),o(oe,"step",t[6].fillingRate2.step),o(oe,"class","w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),oe.disabled=t[2],o(Q,"class","space-y-4"),o(X,"class","bg-white dark:bg-gray-800 rounded-2xl p-5 mb-6 floating-shadow relative overflow-hidden"),o(n,"class","max-w-md mx-auto"),o(e,"id","settings-page"),o(e,"class",nt="page-transition absolute inset-0 px-4 py-6 overflow-y-auto "+(t[0]===V.SettingsLight?"":"translate-x-full opacity-0"))},m(P,q){R(P,e,q),c(e,n),c(n,r),c(r,i),c(r,s),c(r,a),c(a,l),c(l,u),c(u,f),c(u,b),c(u,m),c(m,g),c(g,_),c(m,w),c(l,y),c(l,x),he(x,t[1]),c(r,k),fe(h,r,null),c(n,E),c(n,S),c(S,L),c(S,D),c(S,A),c(A,H),c(H,N),c(N,ne),c(N,Y),c(N,$),c($,xe),c(xe,G),c($,re),c(H,be),c(H,T),he(T,t[3]),c(S,B),fe(O,S,null),c(n,_e),c(n,X),c(X,Ae),c(X,Te),c(X,Q),c(Q,Be),c(Be,ge),c(ge,le),c(ge,We),c(ge,ve),c(ve,ie),c(ie,Ie),c(ve,ze),c(Be,F),c(Be,I),he(I,t[4]),c(Q,de),c(Q,Ge),c(Ge,He),c(He,Qe),c(He,Bt),c(He,qe),c(qe,et),c(et,ht),c(qe,It),c(Ge,$t),c(Ge,oe),he(oe,t[5]),c(X,At),fe(Pe,X,null),ce=!0,pt||(Tt=[W(x,"change",t[12]),W(x,"input",t[12]),W(T,"change",t[13]),W(T,"input",t[13]),W(I,"change",t[14]),W(I,"input",t[14]),W(oe,"change",t[15]),W(oe,"input",t[15])],pt=!0)},p(P,[q]){(!ce||q&2)&&p!==(p=P[1].toFixed(2)+"")&&ye(_,p),(!ce||q&4)&&(x.disabled=P[2]),q&2&&he(x,P[1]);const Pt={};q&4&&(Pt.loading=P[2]),h.$set(Pt),(!ce||q&8)&&z!==(z=P[11](P[3])+"")&&ye(G,z),(!ce||q&4)&&(T.disabled=P[2]),q&8&&he(T,P[3]);const Dt={};q&4&&(Dt.loading=P[2]),O.$set(Dt),(!ce||q&16)&&j!==(j=P[11](P[4])+"")&&ye(Ie,j),(!ce||q&4)&&(I.disabled=P[2]),q&16&&he(I,P[4]),(!ce||q&32)&&tt!==(tt=P[11](P[5])+"")&&ye(ht,tt),(!ce||q&4)&&(oe.disabled=P[2]),q&32&&he(oe,P[5]);const Ut={};q&4&&(Ut.loading=P[2]),Pe.$set(Ut),(!ce||q&1&&nt!==(nt="page-transition absolute inset-0 px-4 py-6 overflow-y-auto "+(P[0]===V.SettingsLight?"":"translate-x-full opacity-0")))&&o(e,"class",nt)},i(P){ce||(ae(h.$$.fragment,P),ae(O.$$.fragment,P),ae(Pe.$$.fragment,P),ce=!0)},o(P){pe(h.$$.fragment,P),pe(O.$$.fragment,P),pe(Pe.$$.fragment,P),ce=!1},d(P){P&&U(e),ue(h),ue(O),ue(Pe),pt=!1,Re(Tt)}}}function rr(t,e,n){let r,i,s,a,l,u;M(t,je,h=>n(0,r=h)),M(t,ct,h=>n(2,s=h));const f=$e.getHumanObjParameters(an),b=f.fps.wrValue;M(t,b,h=>n(1,i=h));const m=f.fillingRate.wrValue;M(t,m,h=>n(3,a=h));const g=f.fillingEmptyRate2.wrValue;M(t,g,h=>n(4,l=h));const p=f.fillingRate2.wrValue;M(t,p,h=>n(5,u=h));const _=h=>Math.round(h*100);function w(){i=Oe(this.value),b.set(i)}function y(){a=Oe(this.value),m.set(a)}function x(){l=Oe(this.value),g.set(l)}function k(){u=Oe(this.value),p.set(u)}return[r,i,s,a,l,u,f,b,m,g,p,_,w,y,x,k]}class ir extends Se{constructor(e){super(),Ee(this,e,rr,nr,ke,{})}}function sr(t){let e,n,r,i,s,a,l,u,f,b,m,g,p=t[1].toFixed(2)+"",_,w,y,x,k,h,E,S,L,D,A,H=t[7](t[3])+"",N,ne,Y,$,xe,z,G,re,be,T;return z=new Ye({props:{loading:t[2]}}),{c(){e=d("div"),n=d("div"),r=d("div"),i=d("h3"),i.innerHTML=`<i class="fa-solid fa-sliders mr-2 text-red-500"></i>
                        \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0433\u0443\u0434\u043A\u0430`,s=C(),a=d("div"),l=d("div"),u=d("div"),f=d("label"),f.textContent="\u0427\u0430\u0441\u0442\u043E\u0442\u0430",b=C(),m=d("span"),g=d("span"),_=J(p),w=J(" \u0413\u0446"),y=C(),x=d("input"),k=C(),h=d("div"),E=d("div"),S=d("label"),S.textContent="\u0417\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u0435",L=C(),D=d("span"),A=d("span"),N=J(H),ne=J("%"),Y=C(),$=d("input"),xe=C(),me(z.$$.fragment),o(i,"class","font-bold mb-4 flex items-center"),o(f,"class","font-medium"),o(g,"id","horn-freq-value"),o(m,"class","text-red-500 font-bold"),o(u,"class","flex justify-between mb-1"),o(x,"type","range"),o(x,"min",t[4].fps.min),o(x,"max",t[4].fps.max),o(x,"step",t[4].fps.step),x.disabled=t[2],o(x,"class","w-full h-2 bg-red-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),o(S,"class","font-medium"),o(A,"id","horn-duty-value"),o(D,"class","text-yellow-500 font-bold"),o(E,"class","flex justify-between mb-1"),o($,"type","range"),o($,"min",t[4].fillingRate.min),o($,"max",t[4].fillingRate.max),o($,"step",t[4].fillingRate.step),$.disabled=t[2],o($,"class","w-full h-2 bg-yellow-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),o(a,"class","space-y-4"),o(r,"class","bg-white dark:bg-gray-800 rounded-2xl p-5 mb-6 floating-shadow relative overflow-hidden"),o(n,"class","max-w-md mx-auto"),o(e,"id","horn-settings"),o(e,"class",G="page-transition absolute inset-0 px-4 py-6 overflow-y-auto "+(t[0]===V.SettingsHorn?"":"translate-x-full opacity-0"))},m(B,O){R(B,e,O),c(e,n),c(n,r),c(r,i),c(r,s),c(r,a),c(a,l),c(l,u),c(u,f),c(u,b),c(u,m),c(m,g),c(g,_),c(m,w),c(l,y),c(l,x),he(x,t[1]),c(a,k),c(a,h),c(h,E),c(E,S),c(E,L),c(E,D),c(D,A),c(A,N),c(D,ne),c(h,Y),c(h,$),he($,t[3]),c(r,xe),fe(z,r,null),re=!0,be||(T=[W(x,"change",t[8]),W(x,"input",t[8]),W($,"change",t[9]),W($,"input",t[9])],be=!0)},p(B,[O]){(!re||O&2)&&p!==(p=B[1].toFixed(2)+"")&&ye(_,p),(!re||O&4)&&(x.disabled=B[2]),O&2&&he(x,B[1]),(!re||O&8)&&H!==(H=B[7](B[3])+"")&&ye(N,H),(!re||O&4)&&($.disabled=B[2]),O&8&&he($,B[3]);const _e={};O&4&&(_e.loading=B[2]),z.$set(_e),(!re||O&1&&G!==(G="page-transition absolute inset-0 px-4 py-6 overflow-y-auto "+(B[0]===V.SettingsHorn?"":"translate-x-full opacity-0")))&&o(e,"class",G)},i(B){re||(ae(z.$$.fragment,B),re=!0)},o(B){pe(z.$$.fragment,B),re=!1},d(B){B&&U(e),ue(z),be=!1,Re(T)}}}function ar(t,e,n){let r,i,s,a;M(t,je,p=>n(0,r=p)),M(t,ct,p=>n(2,s=p));const l=$e.getHumanObjParameters(ln),u=l.fps.wrValue;M(t,u,p=>n(1,i=p));const f=l.fillingRate.wrValue;M(t,f,p=>n(3,a=p));const b=p=>Math.round(p*100);function m(){i=Oe(this.value),u.set(i)}function g(){a=Oe(this.value),f.set(a)}return[r,i,s,a,l,u,f,b,m,g]}class lr extends Se{constructor(e){super(),Ee(this,e,ar,sr,ke,{})}}const or=[{name:"PinAnalogRead",ClassId:1,parameters:["pin"]},{name:"PinDigitalWrite",ClassId:2,parameters:["pin"]},{name:"AnalogToDigitalButtonProcess",ClassId:12,parameters:["threshold","sequenceMs"]},{name:"Pwm",ClassId:3,parameters:["fps","fillingRate"]},{name:"PwmTwoOut",ClassId:4,parameters:["fps","fillingRate","fillingEmptyRate2","fillingRate2"]},{name:"And",ClassId:8,parameters:[]},{name:"Or",ClassId:9,parameters:[]},{name:"Not",ClassId:10,parameters:[]},{name:"AndBits",ClassId:13,parameters:[]},{name:"ConstantParametr",ClassId:7,parameters:["value"]},{name:"SeveralSwitches",ClassId:14,parameters:["numSwitches","durationMs"]}];function hn(t){const e=t.split(/[\r\n]/).map(b=>b.trim().replace(/\s/g,"")).filter(Boolean);let n=1;const r=()=>`_unq_${n++}`+String(Math.random()).replace(".",""),i=[],s=new Map,a=e.map(b=>b.replace(/\/\/[^]*$/,"")).filter(Boolean);let l=0;const u=a.map(b=>b.replace(/([a-zA-Z\_]\w+)(\#\d+)?\(([^]*?)\)/g,m=>{const g=m.match(/^([a-zA-Z\_]\w+)(\#\d+)?\(([^]*?)\)$/);if(!g)throw new Error("Error logic");const p=g[1],_=or.find(E=>E.name.toLowerCase()===p.toLowerCase());if(!_)throw new Error(`Node [${p}] not found`);const w=g[2]?+g[2].slice(1):null,y=g[3].split(",").filter(Boolean),x=[];for(let E=0;E<y.length;E++){const S=y[E],L=_.parameters[E];if(!L)throw new Error(`Node [${p}], parameter (${S}) not expected`);const D=S.split("=").slice(-1)[0],A=parseFloat(D);if(!Number.isFinite(A))throw new Error(`Node [${p}], parameter (${S}) invalid`);const H={parameterName:L,parameterKey:E,parameterValue:A};x.push(H)}const k={nodeId:l++,nodeName:_.name,nodeClassId:_.ClassId,nodeParameters:x,otherId:w,nodeInputs:[],_text:m},h=r();return i.push(k),s.set(h,k),h})),f=b=>{const m=b.split("-->").map(g=>g.split(",").map(p=>{const _=s.get(p);if(!_)throw new Error(`Ident [${p}] not found(${b})`);return _}));for(let g=0;g<m.length-1;g++){let p=m[g];m[g+1][0].nodeInputs.push(...p.map(w=>w.nodeId))}return m.slice(-1)[0][0]};for(const b of u){const m=b.split("=");if(m.length===2){const g=m[0];if(s.get(g))throw new Error(`Ident ${g} already isset, invalid expr(${s.get(g)._text})`);s.set(g,f(m[1]));continue}if(m.length===1){f(m[0]);continue}throw new Error(`Invalid expr(${b})`)}return i}function pn(t,e,n){const r=new St(16384);r.u16(0),r.u8(t),r.staticString(e,16),r.u8(n.length);for(const a of n)r.u8(a.nodeClassId);for(const a of n){r.u8(a.nodeInputs.length);for(const l of a.nodeInputs)r.u8(l)}for(const a of n){r.u8(a.nodeParameters.length);for(const l of a.nodeParameters)r.f64(l.parameterValue)}const i=fn(r.getData()),s=new un(i).u16();return{profileId:t,profileName:e,profileHash:s,profileData:i}}function qt(t){const e=new un(t),n=e.u8(),r=e.u16(),i=[],s=e.u8();for(let a=0;a<s;a++){const l=e.u8(),u=e.u8();for(let f=0;f<u;f++){const b=e.u8(),m=e.f64();i.push({nodeId:l,parameterKey:b,parameterValue:m})}}return{profileId:n,profileHash:r,parameters:i}}function cr(t,e,n){const r=new St(16384);r.u16(e),r.u8(t),r.u8(n.length);for(const i of n){r.u8(i.nodeId),r.u8(i.parameters.length);for(const s of i.parameters)r.u8(s.parameterKey),r.f64(s.parameterValue)}return{profileId:t,profileHash:e,data:r.getData()}}let fr=1;const yt=t=>{const{cmdId:e,rpcId:n,data:r}=t,i=(n!=null?n:fr++)&65535,s=dt(r),a=new St(1024*16);a.u16(0),a.u16(8+s.byteLength),a.u16(i),a.u16(e),a.buffer(r);const l=fn(a.getData());return{...t,rpcId:i,packetData:l}};function Kt(t,e,n){const r=t.slice();return r[16]=e[n],r}function Jt(t,e,n){const r=t.slice();return r[19]=e[n],r}function Zt(t){let e,n,r;return{c(){e=d("button"),e.textContent="\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F",o(e,"class","px-4 py-2 rounded-lg bg-blue-500 text-white font-medium inline-flex items-center ")},m(i,s){R(i,e,s),n||(r=W(e,"click",t[13]),n=!0)},p:ee,d(i){i&&U(e),n=!1,r()}}}function Yt(t){let e;return{c(){e=d("div"),e.innerHTML='<svg aria-hidden="true" class="w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg>',o(e,"role","status")},m(n,r){R(n,e,r)},d(n){n&&U(e)}}}function ur(t){let e;return{c(){e=d("span"),e.textContent="\u041E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E",o(e,"id","bt-gatt-server"),o(e,"class","font-medium text-red-700 darl:text-red-400")},m(n,r){R(n,e,r)},d(n){n&&U(e)}}}function dr(t){let e;return{c(){e=d("span"),e.textContent="\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D\u043E",o(e,"id","bt-gatt-server"),o(e,"class","font-medium text-green-700 darl:text-green-400")},m(n,r){R(n,e,r)},d(n){n&&U(e)}}}function hr(t){var i;let e,n=((i=t[2])==null?void 0:i.name)+"",r;return{c(){e=d("span"),r=J(n),o(e,"id","bt-device"),o(e,"class","font-medium ")},m(s,a){R(s,e,a),c(e,r)},p(s,a){var l;a&4&&n!==(n=((l=s[2])==null?void 0:l.name)+"")&&ye(r,n)},d(s){s&&U(e)}}}function pr(t){let e;return{c(){e=d("span"),e.textContent="\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u043E",o(e,"id","bt-device"),o(e,"class","font-medium")},m(n,r){R(n,e,r)},p:ee,d(n){n&&U(e)}}}function mr(t){let e;return{c(){e=d("span"),e.textContent="\u041D\u0435 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D",o(e,"id","bt-gatt-server"),o(e,"class","font-medium text-red-700 darl:text-red-400")},m(n,r){R(n,e,r)},d(n){n&&U(e)}}}function br(t){let e;return{c(){e=d("span"),e.textContent="\u041F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D",o(e,"id","bt-gatt-server"),o(e,"class","font-medium text-green-700 darl:text-green-400")},m(n,r){R(n,e,r)},d(n){n&&U(e)}}}function gr(t){let e;return{c(){e=d("span"),e.textContent="\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D",o(e,"id","bt-service"),o(e,"class","font-mono text-xs")},m(n,r){R(n,e,r)},p:ee,d(n){n&&U(e)}}}function wr(t){let e,n=t[5].uuid+"",r;return{c(){e=d("span"),r=J(n),o(e,"id","bt-service"),o(e,"class","font-mono text-xs")},m(i,s){R(i,e,s),c(e,r)},p(i,s){s&32&&n!==(n=i[5].uuid+"")&&ye(r,n)},d(i){i&&U(e)}}}function Xt(t){let e,n=t[6],r=[];for(let i=0;i<n.length;i+=1)r[i]=Qt(Jt(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=rn()},m(i,s){for(let a=0;a<r.length;a+=1)r[a].m(i,s);R(i,e,s)},p(i,s){if(s&64){n=i[6];let a;for(a=0;a<n.length;a+=1){const l=Jt(i,n,a);r[a]?r[a].p(l,s):(r[a]=Qt(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(i){_n(r,i),i&&U(e)}}}function Qt(t){let e,n,r=t[19].charUUID+"",i,s;return{c(){e=d("div"),n=d("div"),i=J(r),s=C(),Ve(e,"white-space","nowrap"),o(e,"class","flex")},m(a,l){R(a,e,l),c(e,n),c(n,i),c(e,s)},p(a,l){l&64&&r!==(r=a[19].charUUID+"")&&ye(i,r)},d(a){a&&U(e)}}}function en(t,e){let n,r=e[16].text+"",i,s;return{key:t,first:null,c(){n=d("div"),i=J(r),Ve(n,"white-space","nowrap"),o(n,"class",s=e[12](e[16])),this.first=n},m(a,l){R(a,n,l),c(n,i)},p(a,l){e=a,l&1&&r!==(r=e[16].text+"")&&ye(i,r),l&1&&s!==(s=e[12](e[16]))&&o(n,"class",s)},d(a){a&&U(n)}}}function xr(t){let e,n,r,i,s,a,l,u,f,b,m,g,p,_,w,y,x,k,h,E,S,L,D,A,H,N,ne,Y,$,xe,z,G=[],re=new Map,be,T=!t[2]&&Zt(t),B=t[2]&&!t[3]&&Yt();function O(F,I){return F[3]?dr:ur}let _e=O(t),X=_e(t);function Ae(F,I){return F[2]?hr:pr}let Te=Ae(t),Q=Te(t);function Be(F,I){var de;return F[4]&&((de=F[4])==null?void 0:de.connected)?br:mr}let ge=Be(t),le=ge(t);function We(F,I){return F[5]?wr:gr}let ve=We(t),ie=ve(t),j=t[6]&&Xt(t),Ie=t[0];const ze=F=>F[16].id;for(let F=0;F<Ie.length;F+=1){let I=Kt(t,Ie,F),de=ze(I);re.set(de,G[F]=en(de,I))}return{c(){e=d("div"),n=d("div"),r=d("div"),i=d("div"),s=d("h3"),s.innerHTML='<div class="flex mb-1 text-blue-500 inline-flex items-center"><svg class="h-6 w-6" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><polyline points="6 8 18 16 12 20 12 4 18 8 6 16"></polyline></svg></div>',a=C(),T&&T.c(),l=C(),B&&B.c(),u=C(),f=d("div"),b=d("div"),m=d("span"),m.textContent="\u0421\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435:",g=C(),X.c(),p=C(),_=d("div"),w=d("span"),w.textContent="BLEDevice",y=C(),Q.c(),x=C(),k=d("div"),h=d("span"),h.textContent="BLEGATTServer",E=C(),le.c(),S=C(),L=d("div"),D=d("span"),D.textContent="BLEService",A=C(),ie.c(),H=C(),N=d("div"),ne=d("div"),ne.textContent="BLECharacteristics:",Y=C(),$=d("div"),j&&j.c(),xe=C(),z=d("div");for(let F=0;F<G.length;F+=1)G[F].c();o(s,"class","font-bold flex"),o(i,"class","flex justify-between items-center mb-4"),o(m,"class","w-32 text-gray-500 dark:text-gray-400"),o(b,"class","flex items-center"),o(w,"class","w-32 text-gray-500 dark:text-gray-400"),o(_,"class","flex items-center"),o(h,"class","w-32 text-gray-500 dark:text-gray-400"),o(k,"class","flex items-center"),o(D,"class","w-32 text-gray-500 dark:text-gray-400"),o(L,"class","flex items-center"),o(ne,"class","text-gray-500 dark:text-gray-400 mb-1"),o($,"class","space-y-2 font-mono text-xs rounded-2xl font-mono p-2"),o(N,"class",""),o(N,"id","characteristics-section"),o(f,"class","space-y-3 mb-4"),o(r,"class","bg-white dark:bg-gray-800 rounded-2xl p-5 mb-6 floating-shadow"),o(z,"class","bg-gray-900 text-green-400 rounded-2xl p-4 h-64 overflow-y-auto overflow-x-hidden font-mono text-xs"),o(n,"class","max-w-md mx-auto"),o(e,"id","bluetooth-console-page"),o(e,"class",be="page-transition absolute inset-0 px-4 py-6 overflow-y-auto "+(t[1]===V.Bluetooth?"":"translate-x-full opacity-0"))},m(F,I){R(F,e,I),c(e,n),c(n,r),c(r,i),c(i,s),c(i,a),T&&T.m(i,null),c(i,l),B&&B.m(i,null),c(r,u),c(r,f),c(f,b),c(b,m),c(b,g),X.m(b,null),c(f,p),c(f,_),c(_,w),c(_,y),Q.m(_,null),c(f,x),c(f,k),c(k,h),c(k,E),le.m(k,null),c(f,S),c(f,L),c(L,D),c(L,A),ie.m(L,null),c(f,H),c(f,N),c(N,ne),c(N,Y),c(N,$),j&&j.m($,null),c(n,xe),c(n,z);for(let de=0;de<G.length;de+=1)G[de].m(z,null)},p(F,[I]){F[2]?T&&(T.d(1),T=null):T?T.p(F,I):(T=Zt(F),T.c(),T.m(i,l)),F[2]&&!F[3]?B||(B=Yt(),B.c(),B.m(i,null)):B&&(B.d(1),B=null),_e!==(_e=O(F))&&(X.d(1),X=_e(F),X&&(X.c(),X.m(b,null))),Te===(Te=Ae(F))&&Q?Q.p(F,I):(Q.d(1),Q=Te(F),Q&&(Q.c(),Q.m(_,null))),ge!==(ge=Be(F))&&(le.d(1),le=ge(F),le&&(le.c(),le.m(k,null))),ve===(ve=We(F))&&ie?ie.p(F,I):(ie.d(1),ie=ve(F),ie&&(ie.c(),ie.m(L,null))),F[6]?j?j.p(F,I):(j=Xt(F),j.c(),j.m($,null)):j&&(j.d(1),j=null),I&4097&&(Ie=F[0],G=En(G,I,ze,1,F,Ie,re,z,Ln,en,null,Kt)),I&2&&be!==(be="page-transition absolute inset-0 px-4 py-6 overflow-y-auto "+(F[1]===V.Bluetooth?"":"translate-x-full opacity-0"))&&o(e,"class",be)},i:ee,o:ee,d(F){F&&U(e),T&&T.d(),B&&B.d(),X.d(),Q.d(),le.d(),ie.d(),j&&j.d();for(let I=0;I<G.length;I+=1)G[I].d()}}}function _r(t,e,n){let r,i,s,a,l,u;M(t,je,h=>n(1,r=h));const f=vt(),b=f.wrBLEDevice;M(t,b,h=>n(2,i=h));const m=f.wrBLEGATTServer;M(t,m,h=>n(4,a=h));const g=f.wrBLEService;M(t,g,h=>n(5,l=h));const p=f.wrBLECharacteristics;M(t,p,h=>n(6,u=h));const _=f.wrBLEConnected;M(t,_,h=>n(3,s=h)),window.compileTextProfileToAst=hn,window.compileAstProfileToBinary=pn,window.createPacket=yt;let w=[];te().onLogList(h=>{n(0,w=h.slice().reverse())});const y=h=>{switch(h.type){case"done":return"text-green-600";case"error":return"text-red-700";case"warning":return"text-amber-600"}return"text-blue-200"};let x=!1;return[w,r,i,s,a,l,u,b,m,g,p,_,y,async()=>{x||(x=!0,await vt().connect(),x=!1)}]}class vr extends Se{constructor(e){super(),Ee(this,e,_r,xr,ke,{})}}function yr(t,e,n){let r;const i=vt(),s=i.wrBLEConnected;M(t,s,y=>n(2,r=y));let a=!1;const l=hn(`
	outLight1 = PinDigitalWrite(15)
	outLight2 = PinDigitalWrite(17)
	outHorn   = PinDigitalWrite(21)

	inLight = PinAnalogRead(pin=12) --> AnalogToDigitalButtonProcess(threshold=0.5, sequenceMs=20)
	inHorn  = PinAnalogRead(pin=13) --> AnalogToDigitalButtonProcess(threshold=0.5, sequenceMs=20)
	
	pwmTwo            = PwmTwoOut#1(fps=5, fillingRate=0.5, fillingEmptyRate2=0.5, fillingRate2=0.5)
	pwm               = Pwm#2(fps=5, fillingRate=0.5)
	isEnableStbGlobal = ConstantParametr#3(0)
	
	pwmLigth1 = pwmTwo, ConstantParametr(1) --> AndBits()
	pwmLigth2 = pwmTwo, ConstantParametr(2) --> AndBits()
	
	tmpLight = inLight --> SeveralSwitches(3, 1100)
	isEnableStbLight = tmpLight, isEnableStbGlobal --> And()
	
	tmpHorn  = inHorn --> Not() --> SeveralSwitches(3, 2000)
	isEnableStbHorn = tmpHorn, isEnableStbGlobal --> And()
	
	isEnableStbNot = isEnableStbLight --> Not()
	isNativeLight = inLight, isEnableStbNot --> And() 
	
	finalPwmHorn = isEnableStbHorn, pwm --> And()
	
	finalPwmLigth1 = isEnableStbLight, pwmLigth1 --> And()
	finalPwmLigth2 = isEnableStbLight, pwmLigth2 --> And()
	
	finalPwmLigth1, isNativeLight --> Or() --> outLight1
	finalPwmLigth2, isNativeLight --> Or() --> outLight2
	
	finalPwmHorn, inHorn --> Or() --> outHorn
`),u=pn(1,"Main",l);let f=-1;const b=y=>{var x;return(x=l.find(k=>k.otherId===y))==null?void 0:x.nodeId};async function m(y){if(y==f)return!0;try{te().notify("Init parameters...");const x=await i.readValue("inform"),k=qt(x);for(const h of l){if(!Number.isFinite(h.otherId))continue;const E=k.parameters.filter(S=>S.nodeId===h.nodeId);for(const S of E)$e.setParameterValue(h.otherId,S.parameterKey,S.parameterValue)}return te().done("Init parameters done"),f=y,!0}catch(x){te().error(`Init parameters: ${x==null?void 0:x.message}`)}return!1}window.ast=l,window.bAst=u,window.printAstBinary=()=>{console.log(`const std::array< uint8_t, ${u.profileData.length} > mainProfileData = {${u.profileData.map(y=>y).join(", ")}};`)};let g=1;async function p(){if(!r){n(1,a=!1);return}g++}window.espSendProgram=()=>i.writeValue("request",yt({cmdId:1,data:u.profileData}).packetData),window.parseInformAndInit=m;async function _(){if(!!r&&!!await m(g)){for(n(1,a=!0);r&&a;)if(await Ze(30),$e.isUIInvalidateState()){$e.clearUIInvalidateState();try{const x=$e.getKeyValueList().map(h=>({...h,nodeId:b(h.otherId)})).filter(h=>Number.isFinite(h.nodeId)),k=cr(u.profileId,u.profileHash,x);await i.writeValue("request",yt({cmdId:2,data:k.data}).packetData)}catch(y){te().error(`Logic: ${y==null?void 0:y.message}`),await Ze(100)}}n(1,a=!1)}}async function w(){for(;;)await Ze(30),await _()}return w(),window.parseProfileParametersInfo=qt,t.$$.update=()=>{t.$$.dirty&4&&r&&p(),t.$$.dirty&6&&ct.set(!r||!a)},[s,a,r]}class Cr extends Se{constructor(e){super(),Ee(this,e,yr,null,ke,{})}}function kr(t){let e,n,r,i,s,a,l,u,f,b,m,g,p,_,w,y,x,k;return e=new Cr({}),r=new qn({}),u=new tr({}),m=new ir({}),p=new lr({}),w=new vr({}),x=new Zn({}),{c(){me(e.$$.fragment),n=C(),me(r.$$.fragment),i=C(),s=d("main"),a=d("div"),l=d("div"),me(u.$$.fragment),b=C(),me(m.$$.fragment),g=C(),me(p.$$.fragment),_=C(),me(w.$$.fragment),y=C(),me(x.$$.fragment),o(l,"class","max-w-md mx-auto"),o(a,"id","home-page"),o(a,"class",f="page-transition absolute inset-0 px-4 py-6 overflow-y-auto "+(t[0]===V.Home?"":"translate-x-full opacity-0")),o(s,"class","flex-1 overflow-hidden relative")},m(h,E){fe(e,h,E),R(h,n,E),fe(r,h,E),R(h,i,E),R(h,s,E),c(s,a),c(a,l),fe(u,l,null),c(s,b),fe(m,s,null),c(s,g),fe(p,s,null),c(s,_),fe(w,s,null),R(h,y,E),fe(x,h,E),k=!0},p(h,[E]){(!k||E&1&&f!==(f="page-transition absolute inset-0 px-4 py-6 overflow-y-auto "+(h[0]===V.Home?"":"translate-x-full opacity-0")))&&o(a,"class",f)},i(h){k||(ae(e.$$.fragment,h),ae(r.$$.fragment,h),ae(u.$$.fragment,h),ae(m.$$.fragment,h),ae(p.$$.fragment,h),ae(w.$$.fragment,h),ae(x.$$.fragment,h),k=!0)},o(h){pe(e.$$.fragment,h),pe(r.$$.fragment,h),pe(u.$$.fragment,h),pe(m.$$.fragment,h),pe(p.$$.fragment,h),pe(w.$$.fragment,h),pe(x.$$.fragment,h),k=!1},d(h){ue(e,h),h&&U(n),ue(r,h),h&&U(i),h&&U(s),ue(u),ue(m),ue(p),ue(w),h&&U(y),ue(x,h)}}}function Fr(t,e,n){let r;return M(t,je,i=>n(0,r=i)),[r]}class Lr extends Se{constructor(e){super(),Ee(this,e,Fr,kr,ke,{})}}new Lr({target:document.getElementById("app")});"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(t=>{console.log("Service Worker \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",t)})});export default Er();
